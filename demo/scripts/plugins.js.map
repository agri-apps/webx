{"version":3,"file":"plugins.js","sources":["../../src/utils/dom.js","../../src/plugins/nav/index.js","../../src/plugins/nav/browser.js","../../src/plugins/typer/index.js","../../src/plugins/typer/browser.js","../../src/plugins/templater/index.js","../../src/plugins/templater/browser.js","../../src/plugins/modal/index.js","../../src/plugins/modal/browser.js","../../src/plugins/form/index.js","../../src/plugins/form/browser.js","../../src/plugins/toaster/index.js","../../src/plugins/i18n/index.js","../../src/plugins/toaster/browser.js","../../src/plugins/i18n/browser.js","../../src/plugins/storage/local/index.js","../../src/plugins/storage/browser.js"],"sourcesContent":["export const addClass = (cls, el) => {\n  if (!cls || !el) {\n    return;\n  }\n  if (typeof cls === \"string\") {\n    el.classList.add.apply(el.classList, cls.split(\" \"));\n  } else if (Array.isArray(cls)) {\n    el.classList.add.apply(el.classList, cls);\n  }\n};\n\nconst _removeClassArr = (arr, el) => {\n  arr.forEach((cls) => {\n    if (el.classList.contains(cls)) {\n      el.classList.remove(cls);\n    }\n  });\n};\n\nexport const removeClass = (cls, el) => {\n  if (!cls || !el) {\n    return;\n  }\n  if (typeof cls === \"string\") {\n    _removeClassArr(cls.split(\" \"), el);\n  } else if (Array.isArray(cls)) {\n    _removeClassArr(cls, el);\n  }\n};\n\nexport const isNode = (o) => {\n    return typeof Node === \"object\"\n      ? o instanceof Node\n      : o &&\n          typeof o === \"object\" &&\n          typeof o.nodeType === \"number\" &&\n          typeof o.nodeName === \"string\";\n  }\n\nexport const isElement = (o) => {\n    return typeof HTMLElement === \"object\"\n      ? o instanceof HTMLElement //DOM2\n      : o &&\n          typeof o === \"object\" &&\n          o !== null &&\n          o.nodeType === 1 &&\n          typeof o.nodeName === \"string\";\n  }\n\nexport const isDomObject = (o) => isNode(o) || isElement(o);\n\nexport const sanitizeHtml = (html) => {\n    var el = document.createElement('div');\n    el.innerText = html;\n    return el.innerHTML;\n}\n\nexport const createElement = (str, multi = false) => {\n    var frag = document.createRange().createContextualFragment(str);\n    let el = frag.firstElementChild;\n    return multi ? frag : el;\n}\n\nexport const setFormValue = (el, val) => {\n    if (!el) return;\n    if (el.type === 'checkbox' || el.type === 'radio') {\n        el.checked = el.value == val;\n    } else if (el.type === 'select') {\n        let opt = el.options.filter(o => o.value == val)[0];\n        if (opt) {\n            el.selectedIndex = el.options.indexOf(opt);\n        }\n    } else {\n        el.value = val;\n    }    \n}","import { addClass, removeClass } from './../../utils/dom';\n/*\n * Example plugin that hightlights anchors based on extra route data.\n * See routes in index.html for configuration.\n */\nexport default {\n    name: \"webx1NavPlugin\",\n    global: \"$\",\n    namespace: \"nav\",\n    install: (app, options) => {\n      let opts = Object.assign({ activeClassName: \"active\" }, options);\n  \n      let origInitRoute = app.initRoute;\n      let origUnmountRoute = app.unmountRoute;\n      let origBoot = app.boot;\n  \n      let rootEl = opts.scope ? document.querySelector(opts.scope) : app.el;\n  \n      app.initRoute = async (route, state) => {\n        await origInitRoute(route, state);\n        const routeMap = Object.keys(app.routes).reduce((prev, curr) => {\n          let rt = app.routes[curr];\n          if (rt.name) {\n            prev[rt.name] = {\n              root: rt.root,\n              path: curr,\n              activeClass: rt.activeClass || opts.activeClassName,\n            };\n          }\n          return prev;\n        }, {});\n        let links = [].slice.call(rootEl.querySelectorAll(\"a[data-route]\"));\n  \n        links.forEach((anchor) => {\n          let routeName = anchor.dataset[\"route\"];\n          let current = routeMap[routeName] || {};\n  \n          if (current.activeClassName) {\n            anchor.dataset[\"activeClass\"] = activeClass;\n          }\n  \n          anchor.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n  \n            let { path, activeClass, root } =\n              routeMap[e.target.dataset[\"route\"]] || {};\n            if (path) {\n              let href = e.target.href;\n              let currPath = href.replace(window.location.origin, \"\");\n  \n              window.history.pushState({}, currPath, href);\n              app.navigate(e.target.pathname);\n  \n              let anchor = root\n                ? rootEl.querySelector(`[data-route=\"${root}\"]`)\n                : e.target;\n  \n              if (anchor) {\n                if (activeClass) {\n                  anchor.dataset[\"activeClass\"] = activeClass;\n                }\n                addClass(activeClass || opts.activeClassName, anchor);\n              }\n            }\n          });\n        });\n      };\n  \n      app.unmountRoute = (route, state) => {\n        origUnmountRoute.call(app, route, state);\n        [].slice\n          .call(rootEl.querySelectorAll(\"a[data-route]\"))\n          .forEach((link) => { \n            removeClass(link.dataset[\"activeClass\"] || opts.activeClassName, link);\n          });\n      };\n  \n      app.boot = async () => {\n        await origBoot.call(app);\n        let pathname = window.location.pathname;\n  \n        if (pathname) {\n          let currentRoute = await app.getRoute(pathname);\n          if (currentRoute && currentRoute.name) {\n            let routeName = currentRoute.root\n              ? currentRoute.root\n              : currentRoute.name;\n            let anchor = rootEl.querySelector(`[data-route=\"${routeName}\"]`);\n            if (anchor) {\n              let cls = currentRoute.activeClass || opts.activeClassName;\n              addClass(cls, anchor);\n              anchor.dataset[\"activeClass\"] = cls;\n            }\n          }\n        }\n      };\n  \n      // API to return\n      return {\n        getRouteElements: () => {\n          return [].slice.call(rootEl.querySelectorAll(\"[data-route]\"));\n        },\n      };\n    },\n  };\n  ","import webx1NavPlugin from './index';\n\nif (typeof window !== undefined) {\n    window.webx1NavPlugin = webx1NavPlugin;\n}","const defaultOptions = { speed: 100 };\n\nexport default {\n  name: \"webx1TyperPlugin\",\n  global: \"$\",\n  namespace: \"typer\",\n  install: (app, options = {}) => {\n    let opts = Object.assign({}, defaultOptions, options);\n    let rootEl = opts.scope ? document.querySelector(opts.scope) : app.el;\n    let origInitRoute = app.initRoute;\n\n    const run = () => {\n        [].slice.call(rootEl.querySelectorAll(\"[data-typer]\")).forEach((el) => {\n            let text = el.dataset[\"typer\"] || el.textContent;\n            let speed = el.hasAttribute(\"data-speed\")\n              ? parseInt(el.dataset[\"speed\"])\n              : opts.speed;\n            typewriter(text, speed, el.hasAttribute('data-replace'), el.hasAttribute('data-repeat'), el.getAttribute('data-append')).typeIt(el, text);\n          });\n    }\n\n    app.initRoute = async (route, state) => {\n      await origInitRoute.call(app, route, state);\n        run();      \n    };\n\n    function typewriter(text, speed, replace = false, repeat = false, append = '') {\n      let i = 0;\n      let txt = text;\n      let origText = text;\n\n      if (!speed) {\n        speed = 100;\n      }\n\n      const api = {\n        typeIt: function (el, str) {\n          let ts;\n          if (str) {\n            txt = str;\n            i = 0;\n          }\n          if (el) {\n            api.el = el;\n          }\n\n          if (i < txt.length) {\n            el.textContent = replace ? txt.charAt(i) : (el.textContent + txt.charAt(i));\n            if (append) {\n                el.textContent = el.textContent + append\n            }\n            i++;\n            ts = setTimeout(api.typeIt.bind(null, el), speed);\n          } else {\n              if (repeat) {\n                  el.textContent = '';\n                  ts = setTimeout(api.typeIt.bind(null, el, origText))\n              }\n          }\n          return {\n              stop: () => {\n                  if (ts) {\n                    clearTimeout(ts);\n                  }                \n              }\n          }\n        },\n      };\n      return api;\n    }\n\n    return {\n      typeIt: (el, text, speed = opts.speed, replace) => {\n        return typewriter(text, speed, replace).typeIt(el, text);\n      },\n      run\n    };\n  },\n};\n","import webx1TyperPlugin from './index';\n\nif (typeof window !== undefined) {\n    window.webx1TyperPlugin = webx1TyperPlugin;\n}","const defaultOptions = { clobber: true };\n\nexport default {\n  name: \"webx1TemplaterPlugin\",\n  global: \"$\",\n  namespace: \"template\",\n  install: (app, options = {}) => {\n    const templateCache = {};\n    const listeners = {};\n\n    let opts = Object.assign({}, defaultOptions, options);\n    let rootEl = opts.scope ? document.querySelector(opts.scope) : app.el;\n\n    function Templater(templateText) {\n      return new Function(\n        \"page\",\n        \"var output=\" +\n          JSON.stringify(templateText)\n            .replace(/<%=(.+?)%>/g, '\"+($1)+\"')\n            .replace(/<%(.+?)%>/g, '\";$1\\noutput+=\"') +\n          \";return output;\"\n      );\n    }\n\n    const api = {\n      init: () => {\n        let templates = [].slice.call(\n          rootEl.querySelectorAll('script[type=\"text/template\"]')\n        );\n        templates.forEach((template) => {\n          let id = template.getAttribute(\"id\");\n          if (id && template.textContent) {\n            templateCache[id] = Templater(template.textContent);\n          }\n        });\n      },\n      register: (name, templateText) => {\n        if (templateCache[name]) {\n            if (!opts.clobber) {\n                throw new Error(`A template named \"${name}\" is already registered!`);\n            }\n        }\n        templateCache[name] = Templater(templateText);\n        if (listeners[name]) {\n            listeners[name].forEach(handler => {\n                handler(templateCache[name]);\n            });\n        }\n      },\n      registerFromUrl: async (name, url, onError) => {\n        if (templateCache[name] && !opts.clobber) {\n          onError\n            ? onError(\n                `A template with the name \"${name}\" is already registered!`\n              )\n            : null;\n          return;\n        }\n\n        try {\n            let res = await fetch(url);\n            let templateText = await res.text();\n            templateCache[name] = Templater(templateText);\n            if (listeners[name]) {\n                listeners[name].forEach(handler => {\n                    handler(templateCache[name]);\n                });\n            }\n        } catch (err) {\n            if (app.debug) {\n                console.error(`[webx1TemplaterPlugin] Failed to fetch remote template`, err);\n            }\n            onError && onError(err);\n        }\n      },\n      ready: (name, callback) => {\n        if (!listeners[name]) {\n            listeners[name] = [];\n        }\n        listeners[name].push(callback);\n\n        if (templateCache[name]) {\n            callback(templateCache[name]);\n        }\n      },\n      render: (name, obj) => {\n        if (!templateCache[name]) {\n          throw new Error(\n            `Unknown template \"${name}\". Did you register it first?`\n          );\n        }\n        return templateCache[name](obj);\n      },\n      renderTo(name, obj, el, callback) {\n        let elem = el;\n        if (!el) {\n          throw new Error(\"An element is required to bind!\");\n        }\n        if (typeof el === \"string\") {\n          elem = document.querySelector(el);\n        }\n\n        if (!templateCache[name]) {\n          console.warn(\n            `[webx1TemplaterPlugin] Missing template \"${name}\" on bind! Is it registered?`\n          );\n          return;\n        }\n        elem.innerHTML = templateCache[name](obj);\n        if (callback && typeof callback === \"function\") {\n          callback(el, name, obj);\n        }\n      },\n    };\n\n    return api;\n  },\n};\n","import webx1TemplaterPlugin from './index';\n\nif (typeof window !== undefined) {\n    window.webx1TemplaterPlugin = webx1TemplaterPlugin;\n}","import { addClass, removeClass } from './../../utils/dom';\n\nconst defaultOptions = { \n    modalClassName: \"modal\", \n    contentClassName: \"modal__content\",\n    modalOpenClassName: \"has-modal\",\n    header: true,\n    footer: true,\n    container: \"body\",\n    animation: \"\",\n    template: (options) => `\n        <div class=\"${options.modalClassName}\" style=\"display: none;\">\n            <div class=\"${options.contentClassName}\">\n            </div>\n        </div>\n    `\n};\n\nexport default {\n  name: \"webx1ModalPlugin\",\n  global: \"$\",\n  namespace: \"modal\",\n  install: (app, options = {}) => {\n\n    let opts = Object.assign({}, defaultOptions, options);\n    let rootEl = document.querySelector(opts.container) || document.body;\n\n    const api = {\n      show: (content, callback, options = {}) => {\n\n        let localOptions = Object.assign({}, opts, options);\n\n        addClass(localOptions.modalOpenClassName, rootEl);\n\n        let modal = document.createElement('div');\n        modal.innerHTML = opts.template(localOptions);\n        console.log('template', modal.innerHTML, modal);\n\n        let modalEl = modal.firstElementChild;\n        console.log('modalEl', modalEl, modal.firstChild, modal.firstElementChild);\n\n        rootEl.appendChild(modalEl);\n\n        modalEl.style.display = 'block';\n        let contentEl = modalEl.querySelector(`.${localOptions.contentClassName}`);\n        console.log('contentEl', contentEl);\n        if (contentEl) {\n            contentEl.innerHTML = content;\n        }\n\n        let modalApi = {\n            close: () => {\n                modalEl.parentElement.removeChild(modalEl);\n                removeClass(localOptions.modalOpenClassName, rootEl);\n                modal = null;\n            }\n        }\n\n        callback && typeof callback === 'function' ? callback(modalEl, modalApi) : null;\n\n      }\n    };\n\n    return api;\n  },\n};\n","import webx1ModalPlugin from './index';\n\nif (typeof window !== undefined) {\n    window.webx1ModalPlugin = webx1ModalPlugin;\n}","import { isElement, createElement, setFormValue } from \"./../../utils/dom\";\n\nconst PLUGIN = \"webx1FormPlugin\";\n\nconst defaultOptions = {\n  forms: [],\n};\n\nconst serializeForm = (name) => {\n  let form = isElement(name) ? name : cache.forms[name];\n\n  if (!form) {\n    form = document.querySelector(name);\n    if (!form) {\n      throw new Error(\n        `[${PLUGIN}] Unknown form with name or selector \"${name}\"`\n      );\n    }\n  }\n  let i = 0,\n    json = {},\n    serialized = [];\n  for (i; i < form.elements.length; i++) {\n    var field = form.elements[i];\n    // Don't serialize fields without a name, submits, buttons, file and reset inputs, and disabled fields\n    if (\n      !field.name ||\n      field.disabled ||\n      field.type === \"file\" ||\n      field.type === \"reset\" ||\n      field.type === \"submit\" ||\n      field.type === \"button\"\n    )\n      continue;\n\n    // If a multi-select, get all selections\n    if (field.type === \"select-multiple\") {\n      for (var n = 0; n < field.options.length; n++) {\n        if (!field.options[n].selected) continue;\n        if (!json[field.name]) {\n          json[field.name] = [];\n        }\n        json[field.name].push(field.options[n].value);\n\n        serialized.push(\n          encodeURIComponent(field.name) +\n            \"=\" +\n            encodeURIComponent(field.options[n].value)\n        );\n      }\n    }\n\n    // Convert field data to a query string\n    else if (\n      (field.type !== \"checkbox\" && field.type !== \"radio\") ||\n      field.checked\n    ) {\n      json[field.name] = field.value;\n      serialized.push(\n        encodeURIComponent(field.name) + \"=\" + encodeURIComponent(field.value)\n      );\n    }\n  }\n\n  return { json, serialized };\n};\n\nexport default {\n  name: PLUGIN,\n  global: \"$\",\n  namespace: \"form\",\n  install: (app, options = {}) => {\n    let cache = { forms: {} };\n\n    let opts = Object.assign({}, defaultOptions, options);\n    let rootEl = document.querySelector(opts.container) || document.body;\n\n    const createFormProxy = (form, successFn, errorFn, validateFn) => {\n      let formHandler = {\n        get: (target, prop) => {\n          if (prop === \"target\") {\n            return target;\n          } else if (prop === \"serialize\") {\n            return function () {\n              let serialized = serializeForm(target);\n              return serialized;\n            };\n          } else if (prop === \"validate\") {\n            return function () {\n              if (!validateFn || typeof validateFn !== \"function\") {\n                return true;\n              }\n              let values = serializeForm(target);\n              let result = validateFn(form.name, values);\n\n              if (!result) {\n                errorFn ? errorFn(form.name, result, values) : null;\n              }\n\n              return result;\n            };\n          } else if (prop === \"appendTo\") {\n            return function (parentNode) {\n              parentNode.appendChild(target);\n            };\n          } else if (prop === \"remove\") {\n            return function () {\n              target.parentNode.removeChild(target);\n            };\n          }\n\n          return target[prop];\n        },\n        set: (target, prop, value) => {\n          target[prop] = value;\n        },\n      };\n\n      let formProxy = new Proxy(form, formHandler);\n\n      formProxy.target.addEventListener(\"submit\", (e) => {\n        e.preventDefault();\n        let values = formProxy.serialize();\n\n        if (validateFn) {\n          let result = validateFn(values.json);\n          if (!result || result[0]) {\n            successFn ? successFn(name, values, result[1]) : null;\n          } else {\n            errorFn ? errorFn(name, values, result[1]) : null;\n          }\n        } else {\n          successFn ? successFn(name, values, result[1]) : null;\n        }\n      });\n\n      return formProxy;\n    };\n\n    const api = {\n      register: (name, elemOrHtml, validateFn) => {\n        if (cache.forms[name]) {\n          throw new Error(\n            `[${PLUGIN}] A form named \"${name}\" is already registered.`\n          );\n        }\n        if (validateFn) {\n          if (!typeof validateFn === \"function\") {\n            throw new Error(\n              `[${PLUGIN}] The validate property must be a function.`\n            );\n          }\n        }\n        let html = isElement(elemOrHtml) ? elemOrHtml.innerHTML : elemOrHtml;\n\n        cache.forms[name] = [html, validateFn || false];\n      },\n\n      generate: (name, obj, successFn, errorFn) => {\n        let form = cache.forms[name];\n        if (!form) {\n          throw new Error(\n            `[${PLUGIN}] Unknown form named \"${name}\". Did you register it?`\n          );\n        }\n        const [html, validateFn] = form;\n\n        let formEl = createElement(html);\n        formEl.name = name;\n        formEl.dataset[\"registered\"] = true;\n\n        if (obj) {\n          Object.keys(obj).forEach((key) => {\n            let inps = [].slice.call(\n              formEl.querySelectorAll(`[name=\"${key}\"]`)\n            );\n            inps.forEach((inp) => {\n              inp ? setFormValue(inp, obj[key]) : null;\n            });\n          });\n        }\n\n        return createFormProxy(formEl, successFn, errorFn, validateFn);\n      },\n\n      serialize: serializeForm,\n      getAll: () => {\n        return [].slice\n          .call(rootEl.querySelectorAll(\"form[data-registered]\"))\n          .map((form) => createFormProxy(form));\n      },\n      get: (name) => {\n        let form = rootEl.querySelector(`form[name=\"${name}\"]`);\n        return form ? createFormProxy(form) : null;\n      },\n    };\n\n    if (opts.forms) {\n      opts.forms.forEach((frm) => {\n        const [name, html, validate] = frm;\n        try {\n          api.register(name, html, validate);\n        } catch (err) {\n          console.error(`[${PLUGIN}] Unable to register form \"${name}\"`, err);\n        }\n      });\n    }\n\n    return api;\n  },\n};\n","import webx1FormPlugin from './index';\n\nif (typeof window !== undefined) {\n    window.webx1FormPlugin = webx1FormPlugin;\n}","import { addClass, createElement } from \"../../utils/dom\";\n\nconst PLUGIN = \"webx1ToasterPlugin\";\n\nconst defaultOptions = {\n  toastClassName: \"toast\",\n  closeClassName: \"close\",\n  closableClassName: \"closable\",\n  delay: 0,\n  duration: 4000,\n  position: \"bottom center\",\n  bottomCenterClassName: \"bottom-center\",\n  bottomLeftClassName: \"bottom-left\",\n  bottomRightClassName: \"bottom-right\",\n  topCenterClassName: \"top-center\",\n  topLeftClassName: \"top-left\",\n  topRightClassName: \"top-right\",\n  template: (msg, options) =>\n    `<div class=\"${options.toastClassName}${\n      options.closable ? ` ${options.closableClassName}` : \"\"\n    }\">${msg}${\n      options.closable\n        ? `<span class=\"${options.closeClassName}\">&times;</span>`\n        : \"\"\n    }</div>`,\n};\n\nconst install = (app, options) => {\n  let opts = Object.assign({}, defaultOptions, options);\n  let rootEl = document.querySelector(opts.container) || document.body;\n\n  const api = {\n    show: (message, options) => {\n      let localOpts = Object.assign({}, opts, options);\n      let toastEl = createElement(opts.template(message, localOpts));\n      if (localOpts.theme) {\n        addClass(localOpts.theme, toastEl);\n      }\n      switch (localOpts.position) {\n        case \"top center\":\n          addClass(localOpts.topCenterClassName, toastEl);\n          break;\n        case \"top left\":\n          addClass(localOpts.topLeftClassName, toastEl);\n          break;\n        case \"top right\":\n          addClass(localOpts.topRightClassName, toastEl);\n          break;\n        case \"bottom left\":\n          addClass(localOpts.bottomLeftClassName, toastEl);\n          break;\n        case \"bottom right\":\n          addClass(localOpts.bottomRightClassName, toastEl);\n          break;\n        default:\n          addClass(localOpts.bottomCenterClassName, toastEl);\n          break;\n      }\n\n      const hide = (delay) => {\n        setTimeout(() => {\n          toastEl.parentNode.removeChild(toastEl);\n        }, delay);\n      };\n\n      if (localOpts.closable) {\n        let closeEl = toastEl.querySelector(`.${localOpts.closeClassName}`);\n        if (closeEl) {\n          closeEl.addEventListener(\"click\", (e) => {\n            e.preventDefault();\n            hide(0);\n          });\n        } else {\n            toastEl.addEventListener('click', (e) => {\n                e.preventDefault();\n                hide(0);\n            });\n        }\n      }\n\n      setTimeout(() => rootEl.appendChild(toastEl), localOpts.delay);\n\n\n      if (!localOpts.closable) {\n        hide(localOpts.duration || 4000);\n      }\n    },\n  };\n\n  return api;\n};\n\nexport default {\n  name: PLUGIN,\n  global: \"$\",\n  namespace: \"toast\",\n  install,\n};\n","import { isDomObject } from \"./../../utils/dom\";\n\nconst PLUGIN = \"webx1i18nPlugin\";\n\nconst defaultOptions = {\n  fallback: \"en\",\n  languageFilesDir: \"/i18n\",\n};\n\nconst getUserLang = (fallback) => {\n  var lang = navigator.languages ? navigator.languages[0] : navigator.language;\n\n  return lang ? lang.substr(0, 2) : fallback;\n};\n\nconst install = async (app, options) => {\n  let opts = Object.assign({}, defaultOptions, options);\n  let rootEl = document.querySelector(opts.scope) || app.el || document.body;\n\n  const lang = opts.language ? opts.language : getUserLang(opts.fallback);\n\n  const translateText = (str, translations) => {\n    return (str || \"\")\n      .split(\".\")\n      .reduce((obj, i) => obj[i], translations || {});\n  };\n\n  const translatePage = (root, translations) => {\n    api._elements = [].slice.call(root.querySelectorAll(\"[data-i18n]\"));\n    api._elements.forEach((el) => {\n      let text = translateText(el.dataset.i18n, translations);\n      if (text) {\n        el.innerHTML = text;\n      }\n    });\n  };\n\n  const api = {\n    _elements: [],\n    currentLanguage: null,\n    translations: {},\n    load: async (lang) => {\n      try {\n        let res = await fetch(`${opts.languageFilesDir}/${lang}.json`);\n        let json = await res.json();\n        api.translations = json;\n        api.currentLanguage = lang;\n\n        return json;\n      } catch (err) {\n        console.error(\n          `[${PLUGIN}] Unable to load \"${lang}\" translations.`,\n          err\n        );\n      }\n    },\n    translate: (elemOrText) => {\n\n      if (!api.translations) {\n          // race condition\n          api.load(api.currentLanguage || opts.lang)\n            .then(() => {\n                api.translate(elemOrText);\n            })\n          return;\n      }\n\n      if (!elemOrText) {\n        return translatePage(rootEl, api.translations);\n      }\n      if (typeof elemOrText === \"string\") {\n        return translateText(elemOrText, api.translations);\n      } else if (isDomObject(elemOrText)) {\n        return translatePage(elemOrText, api.translations);\n      } else if (Array.isArray(elemOrText)) {\n        return elemOrText.reduce((prev, curr) => {\n          prev.push(translateText(curr), api.translations);\n          return prev;\n        }, []);\n      }\n    },\n  };\n\n  app.listen(function (name) {\n      if (name === \"view-rendered\") {\n          if (!api.translations || !Object.keys(api.translations).length) {\n              api.load(lang)\n                .then(() => {\n                    api.translate();\n                })\n          } else {\n            api.translate();\n          }\n      }\n  });\n\n  let origBoot = app.boot;\n\n  app.boot = async (...args) => {\n      origBoot.apply(app, args);\n\n      try {\n        let translations = await api.load(lang);\n        app.setState('translations', translations);\n        app.setState('language', lang);\n      } catch (err) {\n        console.error(`[${PLUGIN}] Unable to load \"${lang}\" translations.`, err);\n      }\n\n  }\n\n  return api;\n};\n\nexport default {\n  name: PLUGIN,\n  global: \"t\",\n  namespace: \"i18n\",\n  install,\n};\n","import webx1ToasterPlugin from './index';\n\nif (typeof window !== undefined) {\n    window.webx1ToasterPlugin = webx1ToasterPlugin;\n}","import webx1i18nPlugin from './index';\n\nif (typeof window !== undefined) {\n    window.webx1i18nPlugin = webx1i18nPlugin;\n}","const PLUGIN = \"webx1LocalStoragePlugin\";\n\nconst defaultOptions = { prefix: \"\" };\n\nconst install = (app, options) => {\n  var opts = Object.assign({}, defaultOptions, options);\n\n  const k = (key) => (opts.prefix ? `${opts.prefix}${key}` : key);\n\n  const api = {\n    local: {\n      getItem: (key, parse = true) => {\n        return parse\n          ? JSON.parse(localStorage.getItem(k(key)))\n          : localStorage.getItem(k(key));\n      },\n      setItem: (key, obj, json = true) => {\n        json\n          ? localStorage.setItem(k(key), JSON.stringify(obj))\n          : localStorage.setItem(k(key), obj);\n      },\n      removeItem: (key) => {\n        localStorage.removeItem(key);\n      },\n      keyval: (name, reducers = []) => {\n        let storeKey = opts.prefix\n          ? `${opts.prefix}${name}__set`\n          : `${name}__set`;\n\n        const getStore = () => {\n          return api.local.getItem(storeKey) || { _meta: {} };\n        };\n\n        const reduce = (values) => {\n          let meta = {};\n\n          reducers.forEach((r) => {\n            if (!r.id) {\n              throw new Error(\n                `[${PLUGIN}.local] A reducer must have an id property.`\n              );            \n            }\n            if (!r.reduce || typeof r.reduce !== 'function') {\n                throw new Error(\n                    `[${PLUGIN}.local] A reducer must declare a reduce method.`\n                  );  \n            }\n            meta[r.id] = r.reduce(values);\n          });\n\n          return meta;\n        };\n\n        const getKeys = () => Object.keys(getStore()).filter((x) => x.slice(0, 1) !== \"_\");\n\n        const keyvalApi = {\n          keys: getKeys,\n          values: () => {\n            let store = getStore();\n            return getKeys().map((key) => {\n              return store[key];\n            });\n          },\n          getAll: () => {\n            return getStore();\n          },\n          getItem: (key) => {\n            return getStore()[key];\n          },\n          setItem: (key, val) => {\n            let store = getStore() || {};\n            store[key] = val;\n            store._meta = reduce(store);\n            api.local.setItem(storeKey, store);\n          },\n          removeItem: (key) => {\n            let store = getStore() || {};\n            delete store[key];\n            store._meta = reduce(store);\n            api.local.setItem(storeKey, store);\n          },\n          each: (handler) => {\n            let store = getStore() || {};\n            Object.keys(getStore()).forEach((key, idx) => {\n              handler(store[key], key, idx);\n            });\n          },\n        };\n\n        return keyvalApi;\n      },\n    },\n  };\n\n  return api;\n};\n\nexport default {\n  name: PLUGIN,\n  global: \"$\",\n  namespace: \"storage\",\n  install,\n};\n","import webx1LocalStoragePlugin from './local/index';\n\nif (typeof window !== undefined) {\n    window.webx1LocalStoragePlugin = webx1LocalStoragePlugin;\n}"],"names":["addClass","cls","el","classList","add","apply","split","Array","isArray","_removeClassArr","arr","forEach","contains","remove","removeClass","isElement","o","HTMLElement","nodeType","nodeName","createElement","str","multi","frag","document","createRange","createContextualFragment","firstElementChild","name","global","namespace","install","app","options","opts","Object","assign","activeClassName","origInitRoute","initRoute","origUnmountRoute","unmountRoute","origBoot","boot","rootEl","scope","querySelector","route","state","routeMap","keys","routes","reduce","prev","curr","rt","root","path","activeClass","slice","call","querySelectorAll","anchor","dataset","addEventListener","e","preventDefault","target","href","currPath","replace","window","location","origin","history","pushState","navigate","pathname","link","getRoute","currentRoute","getRouteElements","undefined","webx1NavPlugin","defaultOptions","speed","webx1TyperPlugin","run","text","textContent","typewriter","hasAttribute","parseInt","getAttribute","typeIt","repeat","append","i","txt","origText","api","ts","length","charAt","setTimeout","bind","stop","clearTimeout","clobber","webx1TemplaterPlugin","templateCache","listeners","Templater","templateText","Function","JSON","stringify","init","template","id","register","Error","handler","registerFromUrl","url","onError","body","recover","result","fetch","res","then","err","debug","console","error","ready","callback","push","render","obj","renderTo","elem","innerHTML","warn","modalClassName","contentClassName","modalOpenClassName","header","footer","container","animation","webx1ModalPlugin","show","content","localOptions","modal","log","modalEl","firstChild","appendChild","style","display","contentEl","modalApi","close","parentElement","removeChild","PLUGIN","forms","serializeForm","form","cache","json","serialized","elements","field","disabled","type","n","selected","value","encodeURIComponent","checked","webx1FormPlugin","createFormProxy","successFn","errorFn","validateFn","formProxy","Proxy","get","prop","values","parentNode","set","serialize","elemOrHtml","html","generate","formEl","key","inp","val","opt","filter","selectedIndex","indexOf","setFormValue","getAll","map","frm","validate","toastClassName","closeClassName","closableClassName","delay","duration","position","bottomCenterClassName","bottomLeftClassName","bottomRightClassName","topCenterClassName","topLeftClassName","topRightClassName","msg","closable","_catch","webx1ToasterPlugin","message","localOpts","toastEl","theme","hide","closeEl","fallback","languageFilesDir","webx1i18nPlugin","lang","language","navigator","languages","substr","getUserLang","translateText","translations","translatePage","_elements","i18n","currentLanguage","load","translate","elemOrText","Node","isNode","listen","setState","prefix","webx1LocalStoragePlugin","k","local","getItem","parse","localStorage","setItem","removeItem","keyval","reducers","storeKey","getStore","_meta","meta","r","getKeys","x","store","each","idx"],"mappings":"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"}